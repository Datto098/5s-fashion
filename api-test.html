<!DOCTYPE html>
<html>
	<head>
		<title>API Test</title>
		<meta charset="UTF-8" />
	</head>
	<body>
		<h1>Test Chatbot API</h1>
		<form id="testForm">
			<input
				type="text"
				id="message"
				placeholder="Nhập tin nhắn..."
				value="xin chào"
			/>
			<button type="submit">Gửi</button>
		</form>
		<div id="result"></div>

		<script>
			document
				.getElementById('testForm')
				.addEventListener('submit', async function (e) {
					e.preventDefault();

					const message = document.getElementById('message').value;
					const resultDiv = document.getElementById('result');

					try {
						const response = await fetch(
							'/5s-fashion/api/chatbot/chat',
							{
								method: 'POST',
								headers: {
									'Content-Type':
										'application/json; charset=utf-8',
								},
								body: JSON.stringify({ message: message }),
							}
						);

						const data = await response.json();
						resultDiv.innerHTML =
							'<pre>' + JSON.stringify(data, null, 2) + '</pre>';
					} catch (error) {
						resultDiv.innerHTML =
							'<p style="color: red;">Error: ' +
							error.message +
							'</p>';
					}
				});
		</script>
	</body>
</html>
